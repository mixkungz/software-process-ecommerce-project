<!DOCTYPE html>
<html>
<header>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>Your Cart</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="productDetailStyle.css">
</header>

<body>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        var url_string = window.location.href;
        var url = new URL(url_string);
        var sku = url.searchParams.get("sku");
        console.log(sku);
        axios.get('http://localhost:8080/products/' + sku).then(function (response) {
            document.getElementById("productDescription").innerHTML = response.data.productDescription;
            document.getElementById("color").style.color = response.data.color;
            document.getElementById("productName").innerHTML = response.data.productName;
            document.getElementById("productPrice").innerHTML = response.data.productPrice + ".00฿";
            document.getElementById("size").innerHTML = response.data.size;


            var productImgArr = response.data.productImage.split(',');
            var productImgString = '';
            var productImgSize = '';
            console.log(productImgArr);
            console.log(response.data.size);
            console.log(response.data.size == "");
            for (var i = 0; i < productImgArr.length; i++) {
                productImgString += `
                    <img class="mySlides" src="productImage/${productImgArr[i]}">
                `
            }
            document.getElementById("product-imgs").innerHTML = productImgString;
            showDivs(1);
            if (response.data.size == "") {
                document.getElementById("textSize").innerHTML = "";
            } else {
                document.getElementById("textSize").innerHTML = "Size :";
            }
        })
    </script>

    <div class="container" style="margin-bottom: 8px;">
        <div class="cartCount">
            <a href="http://localhost:8888/cart.html">
                <i class="fas fa-shopping-cart"></i>
            </a>
        </div>
        <!-- -------------------- IMAGE -->
        <div class="w3-content w3-display-container">
            <div id="product-imgs">

            </div>
            <div class="w3-center w3-container w3-section w3-large w3-text-white w3-display-bottommiddle" style="width:100%">
                <div class="w3-left w3-hover-text-khaki" onclick="plusDivs(-1)">&#10094;</div>
                <div class="w3-right w3-hover-text-khaki" onclick="plusDivs(1)">&#10095;</div>

            </div>
        </div>
        <!-- -------------------- -->
        <div style="text-align:center; font-family: THSarabanNew">
            <span style="font-size: 18pt;"><strong id="productName">Alexis in Mustard</strong></span>
            <br>
            <span style="font-size: 14pt;"><strong id="productPrice">1,790.00฿</strong></span>
            <hr style="width:24%; margin-left:38%; margin-right:38%; background-color: black" />
            <div class="row">
                <div class="col" style="text-align: right;">
                    <span style="font-size: 14pt;">
                        <strong id="textSize">Size :</strong>
                    </span>
                </div>
                <div class="col" style="text-align: left; padding-left: 0px; font-size: 14pt;">
                    <strong id="size">36</strong>
                </div>
            </div>
            <div class="row">
                <div class="col" style="text-align: right;padding-top: 4px;">
                    <span style="font-size: 14pt;">
                        <strong>Color :</strong>
                    </span>
                </div>
                <div class="col" style="text-align: left; padding-left: 0px;">
                    <i id="color" class="fas fa-square"></i>
                </div>
            </div>
            <div class="row" style="    padding-left: 20px;
            padding-right: 20px;">
                <div class="col" style="font-size: 12pt;font-weight: bold;">
                    <span id="productDescription"></span>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        var slideIndex = 1;
        function plusDivs(n) {
            showDivs(slideIndex += n);
        }

        function currentDiv(n) {
            showDivs(slideIndex = n);
        }

        function showDivs(n) {
            var i;
            var x = document.getElementsByClassName("mySlides");
            var dots = document.getElementsByClassName("demo");
            if (n > x.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = x.length }
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" w3-white", "");
            }
            x[slideIndex - 1].style.display = "block";
            dots[slideIndex - 1].className += " w3-white";
        }
    </script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        var url_string = window.location.href;
        var url = new URL(url_string);
        var sku = url.searchParams.get("sku");
        console.log(sku);
        axios.get('http://localhost:8080/products/' + sku).then(function (response) {
            console.log(response);
            document.getElementById("productDescription").innerHTML = response.data.productDescription;
            document.getElementById("color").style.color = response.data.color;
            document.getElementById("productName").innerHTML = response.data.productName;
            document.getElementById("productPrice").innerHTML = response.data.productPrice + ".00฿";
            document.getElementById("size").innerHTML = response.data.size;
            document.getElementById("productImage").innerHTML = response.data.productImage;
        })


    </script>

    <script>
        function addToCart() {
            var skuArrFromLocalStorage = localStorage.getItem("skuArr")
            if (skuArrFromLocalStorage === null) { skuArrFromLocalStorage = [] }
            else { skuArrFromLocalStorage = skuArrFromLocalStorage.split(',') }

            var url_string = window.location.href;
            var url = new URL(url_string);
            var sku = url.searchParams.get("sku");

            skuArrFromLocalStorage.push(sku)
            localStorage.setItem("skuArr", skuArrFromLocalStorage.toString());
        }
    </script>


</body>
<footer>
    <div class="container" style="margin-bottom:7%; margin-top: 5%">
        <button class="button" style="font-size: 18pt" onclick="addToCart()"><strong>Add to cart</strong></button>
        <br>
    </div>
</footer>

</html>