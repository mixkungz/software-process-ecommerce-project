<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="cartStyle.css" />
  </head>

  <body>
    <div class="topic">
      <div class="col-1" backBt><img class="buttonBack" src="button/back.png" /></div>
      <div class="col" style="margin-top: -12%;"><p>Your Cart</p></div>
      <div class="col" bin style="margin-top: -18%; text-align: right;">
        <img
          class="buttonBin"
          src="button/delete-button.png"
          style="margin-right: 3%; height: 27px;"
        />
      </div>
    </div>
    <!-- Select All -->
    <div class="form-group form-check">
      <input type="checkbox" class="form-check-input" id="check1" />
      <label class="form-check-label" for="exampleCheck1">Select All</label>
    </div>
    <!-- สินค้าที่หยิบใส่ตะกร้า -->
    <div id="productInCart" class="productInCart">
      <!--
        <div class="container">
            <div class="row">
                <div class="col-2 selectItem">
                    <div class="form-group form-select">
                        <input type="checkbox" class="form-select" id="select1">
                        <label class="form-check-label" for="select1"></label>
                    </div>
                </div>
                <div class="col-4 tagImg">
                    <img class="card-img-top productImg" src="products/sneakerOrange.jpg">
                </div>
                <div class="col">
                    <div class="productName">
                        <p class="productDetail">Alexis in Mustard</p>
                    </div>

                    <div class="productAttr">
                        <p class="productDetail">Orange, 38</p>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="btn-group btn-group-sm" role="group">
                                <button onclick="delProduct()" type="button" class="btn btn-secondary del" id="del">-</button>
                                <p class="number" id="number">1</p>
                                <button onclick="addProduct()" type="button" class="btn btn-secondary add" id="add">+</button>
                            </div>
                        </div>
                        <div class="col">
                            <div class="productPrice">
                                <p class="price">1,790.00฿</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      -->
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      async function getPro() {
        var skuArrFromLocalStorage = localStorage.getItem('skuArr')
        if (skuArrFromLocalStorage !== null) {
          skuArrFromLocalStorage = skuArrFromLocalStorage.split(',')

          let productNameArr = []
          let productImgArr = []
          let productPriceArr = []
          let productColorArr = []
          let productSizeArr = []

          for (var i = 0; i < skuArrFromLocalStorage.length; i++) {
            let sku = skuArrFromLocalStorage[i]
            let { data } = await axios.get('http://localhost:8080/products/' + sku)
            await productNameArr.push(data.productName)
            let productImgPerProduct = data.productImage
            let productImgPerPiece = productImgPerProduct.split(',')
            await productImgArr.push(productImgPerPiece[0])
            await productPriceArr.push(data.productPrice)
            await productColorArr.push(data.color)
            await productSizeArr.push(data.size)
          }

          let resultOfProduct = ''
          for (var i = 0; i < skuArrFromLocalStorage.length; i++) {
            resultOfProduct += `
                                                                                                                                                                                                  <div class="container">
                                                                                                                                                                                                      <div class="row">
                                                                                                                                                                                                          <div class="col-2 selectItem">
                                                                                                                                                                                                              <div class="form-group form-select">
                                                                                                                                                                                                                  <input type="checkbox" class="form-select" id="select1">
                                                                                                                                                                                                                  <label class="form-check-label" for="select1"></label>
                                                                                                                                                                                                              </div>
                                                                                                                                                                                                          </div>
                                                                                                                                                                                                          <div class="col-4 tagImg">
                                                                                                                                                                                                              <img class="card-img-top productImg" src="productImage/${
                                                                                                                                                                                                                productImgArr[
                                                                                                                                                                                                                  i
                                                                                                                                                                                                                ]
                                                                                                                                                                                                              }">
                                                                                                                                                                                                          </div>
                                                                                                                                                                                                          <div class="col">
                                                                                                                                                                                                              <div class="productName">
                                                                                                                                                                                                                  <p class="productDetail">${
                                                                                                                                                                                                                    productNameArr[
                                                                                                                                                                                                                      i
                                                                                                                                                                                                                    ]
                                                                                                                                                                                                                  }</p>
                                                                                                                                                                                                              </div>

                                                                                                                                                                                                              <div class="productAttr">
                                                                                                                                                                                                                  <p class="productDetail">${
                                                                                                                                                                                                                    productColorArr[
                                                                                                                                                                                                                      i
                                                                                                                                                                                                                    ]
                                                                                                                                                                                                                  }, ${
              productSizeArr[i]
            }</p>
                                                                                                                                                                                                              </div>
                                                                                                                                                                                                              <div class="row">
                                                                                                                                                                                                                  <div class="col">
                                                                                                                                                                                                                      <div class="btn-group btn-group-sm" role="group">
                                                                                                                                                                                                                          <button onclick="delProduct()" type="button" class="btn btn-secondary del" id="del">-</button>
                                                                                                                                                                                                                          <p class="number" id="number">1</p>
                                                                                                                                                                                                                          <button onclick="addProduct()" type="button" class="btn btn-secondary add" id="add">+</button>
                                                                                                                                                                                                                      </div>
                                                                                                                                                                                                                  </div>
                                                                                                                                                                                                                  <div class="col">
                                                                                                                                                                                                                      <div class="productPrice">
                                                                                                                                                                                                                          <p class="price">${
                                                                                                                                                                                                                            productPriceArr[
                                                                                                                                                                                                                              i
                                                                                                                                                                                                                            ]
                                                                                                                                                                                                                          }</p>
                                                                                                                                                                                                                      </div>
                                                                                                                                                                                                                  </div>
                                                                                                                                                                                                              </div>
                                                                                                                                                                                                          </div>
                                                                                                                                                                                                      </div>
                                                                                                                                                                                                          `
          }
          document.getElementById('productInCart').innerHTML = resultOfProduct
        }
      }
      window.onload = function() {
        getPro()
      }
    </script>
    <!--
      <script>
          function generateProductCategoryCard() {
              var categoryNameArr = ["Women Clothes", "Men Clothes", "Cosmetics", "Smartphones", "Food & Drink", "Books"];
              var categoryImgArr = ["dress.png", "tshirt.png", "make-up.png", "smartphone.png", "diet.png", "library.png"];
              let resultOfCategory = '';
              for (var i = 0; i < 6; i++) {
                  resultOfCategory += `

          <div class="container">
              <div class="row">
                  <div class="col-2 selectItem">
                      <div class="form-group form-select">
                          <input type="checkbox" class="form-select" id="select1">
                          <label class="form-check-label" for="select1"></label>
                      </div>
                  </div>
                  <div class="col-4 tagImg">
                      <img class="card-img-top productImg" src="products/sneakerOrange.jpg">
                  </div>
                  <div class="col">
                      <div class="productName">
                          <p class="productDetail">Alexis in Mustard</p>
                      </div>

                      <div class="productAttr">
                          <p class="productDetail">Orange, 38</p>
                      </div>
                      <div class="row">
                          <div class="col">
                              <div class="btn-group btn-group-sm" role="group">
                                  <button onclick="delProduct()" type="button" class="btn btn-secondary del" id="del">-</button>
                                  <p class="number" id="number">1</p>
                                  <button onclick="addProduct()" type="button" class="btn btn-secondary add" id="add">+</button>
                              </div>
                          </div>
                          <div class="col">
                              <div class="productPrice">
                                  <p class="price">1,790.00฿</p>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>


                              `
              }
              document.getElementById("categoryList").innerHTML = resultOfCategory
          }
      </script>

      <script>
          function showProduct() {
              var dehydratedCart = JSON.parse(window.localStorage.getItem('Cart'));
              var sku = dehydratedCart.sku;
              axios.get('http://localhost:8080/products/' + sku).then(function (response) {
                  // document.getElementById("productDescription").innerHTML = response.data.productDescription;
                  // document.getElementById("color").style.color = response.data.color;
                  // document.getElementById("productName").innerHTML = response.data.productName;
                  // document.getElementById("productPrice").innerHTML = response.data.productPrice + ".00฿";
                  // document.getElementById("size").innerHTML = response.data.size;


                  // var productImgArr = response.data.productImage.split(',');
                  // var productImgString = '';
                  // var productImgSize = '';
                  // console.log(productImgArr);
                  // console.log(response.data.size);
                  // console.log(response.data.size == "");
                  // for (var i = 0; i < productImgArr.length; i++) {
                  //     productImgString += `
                  //         <img class="mySlides" src="productImage/${productImgArr[i]}">
                  //     `
                  // }
                  // document.getElementById("product-imgs").innerHTML = productImgString;
                  // showDivs(1);

                  // if (response.data.size == "") {
                  //     document.getElementById("textSize").innerHTML = "";
                  // } else {
                  //     document.getElementById("textSize").innerHTML = "Size :";
                  // }
              })
          }
      </script>
    -->

    <script>
      function addProduct() {
        var num = document.getElementById('number').innerHTML
        console.log(num)
        document.getElementById('number').innerHTML = parseInt(num) + 1
      }
      function delProduct() {
        var num = document.getElementById('number').innerHTML
        console.log(num)
        document.getElementById('number').innerHTML = parseInt(num) - 1
      }
    </script>
    <br />
    <hr />

    <div class="row">
      <div class="col total"><p>Total</p></div>
      <div class="col calPrice"><p>2,185.00฿</p></div>
    </div>

    <div class="order">
      <button class="buttonOrder" style="font-size: 18pt"><strong>Order</strong></button>
    </div>
    <br />
  </body>
</html>
